language: java

cache:
  directories:
  - $HOME/.m2

services:
  - xvfb

addons:
  chrome: stable
before_install:
  - sudo apt-get -qq update || echo no sudo apt-get
  - sudo apt-get install -y libgnome2-0
  - sudo apt-get install -y libwebkitgtk-3.0-0 || echo no sudo apt-get
# start your web application and listen on `localhost`
  - google-chrome-stable --headless --disable-gpu --remote-debugging-port=9222 http://localhost &
#  - cd client-idea
#  - mkdir -p lib
#  - cd lib
#  - echo $TEST_VAR
#  - cd ..
#  - cd ..
install:
  - mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -ntp
script:
  - mvn test org.jacoco:jacoco-maven-plugin:0.8.2:report -B -ntp
after_success:
  - mvn install coveralls:report -B -ntp
 # - java -cp ~/codacy-coverage-reporter-assembly-latest.jar com.codacy.CodacyCoverageReporter -l Java -r target/site/cobertura/coverage.xml
